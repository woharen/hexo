<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Vinho的私人笔记</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="java使用HttpClient发送http请求&#96;&#96;&#96;javapackage com.pp.locan.shared.utils; import com.alibaba.fastjson.JSON;import org.apache.http.HttpEntity;import org.apache.http.ParseException;import org.apache.http.client">
<meta property="og:type" content="article">
<meta property="og:title" content="Vinho的私人笔记">
<meta property="og:url" content="https://meihao1104.com/2020/09/17/java%E4%BD%BF%E7%94%A8HttpClient%E5%8F%91%E9%80%81http%E8%AF%B7%E6%B1%82/index.html">
<meta property="og:site_name" content="Vinho的私人笔记">
<meta property="og:description" content="java使用HttpClient发送http请求&#96;&#96;&#96;javapackage com.pp.locan.shared.utils; import com.alibaba.fastjson.JSON;import org.apache.http.HttpEntity;import org.apache.http.ParseException;import org.apache.http.client">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2020-09-17T07:23:45.016Z">
<meta property="article:modified_time" content="2020-09-17T07:23:45.016Z">
<meta property="article:author" content="VinhoJiang">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Vinho的私人笔记" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.1.1"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Vinho的私人笔记</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://meihao1104.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-java使用HttpClient发送http请求" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/09/17/java%E4%BD%BF%E7%94%A8HttpClient%E5%8F%91%E9%80%81http%E8%AF%B7%E6%B1%82/" class="article-date">
  <time datetime="2020-09-17T07:23:45.016Z" itemprop="datePublished">2020-09-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="java使用HttpClient发送http请求-java"><a href="#java使用HttpClient发送http请求-java" class="headerlink" title="java使用HttpClient发送http请求```java"></a>java使用HttpClient发送http请求```java</h2><p>package com.pp.locan.shared.utils;</p>
<p>import com.alibaba.fastjson.JSON;<br>import org.apache.http.HttpEntity;<br>import org.apache.http.ParseException;<br>import org.apache.http.client.ClientProtocolException;<br>import org.apache.http.client.config.RequestConfig;<br>import org.apache.http.client.methods.CloseableHttpResponse;<br>import org.apache.http.client.methods.HttpGet;<br>import org.apache.http.client.methods.HttpPost;<br>import org.apache.http.entity.StringEntity;<br>import org.apache.http.impl.client.CloseableHttpClient;<br>import org.apache.http.impl.client.HttpClientBuilder;<br>import org.apache.http.util.EntityUtils;</p>
<p>import java.io.IOException;<br>import java.util.Iterator;<br>import java.util.Map;<br>import java.util.Set;</p>
<p>public class HttpClient {</p>
<pre><code>/**
 * get请求带参数
 * @param map
 */
public static String sendGetParam(Map map, String uri) &#123;
    //设置返回对象
    String returnJson = null;
    // 获得Http客户端(可以理解为:你得先有一个浏览器;注意:实际上HttpClient与浏览器是不一样的)
    CloseableHttpClient httpClient = HttpClientBuilder.create().build();

    // 参数
    StringBuffer params = new StringBuffer();

    // 字符数据最好encoding以下;这样一来，某些特殊字符才能传过去(如:某人的名字就是“&amp;”,不encoding的话,传不过去)
    Set&lt;String&gt; strings = map.keySet();
    Iterator&lt;String&gt; iterator = strings.iterator();
    boolean flag = false;
    while (iterator.hasNext())&#123;
        if (flag)&#123;
            params.append(&quot;&amp;&quot;);
        &#125;
        String key = iterator.next();
        params.append(key + &quot;=&quot; + map.get(key));

        flag= true;
    &#125;


    // 创建Get请求
    HttpGet httpGet = new HttpGet(uri + &quot;?&quot; + params.toString());
    // 响应模型
    CloseableHttpResponse response = null;
    try &#123;
        // 配置信息
        RequestConfig requestConfig = RequestConfig.custom()
                // 设置连接超时时间(单位毫秒)
                .setConnectTimeout(5000)
                // 设置请求超时时间(单位毫秒)
                .setConnectionRequestTimeout(5000)
                // socket读写超时时间(单位毫秒)
                .setSocketTimeout(5000)
                // 设置是否允许重定向(默认为true)
                .setRedirectsEnabled(true).build();

        // 将上面的配置信息 运用到这个Get请求里
        httpGet.setConfig(requestConfig);

        // 由客户端执行(发送)Get请求
        response = httpClient.execute(httpGet);

        // 从响应模型中获取响应实体
        HttpEntity responseEntity = response.getEntity();
        if (responseEntity != null) &#123;
            returnJson = EntityUtils.toString(responseEntity);
        &#125;
    &#125; catch (ClientProtocolException e) &#123;
        e.printStackTrace();
    &#125; catch (ParseException e) &#123;
        e.printStackTrace();
    &#125; catch (IOException e) &#123;
        e.printStackTrace();
    &#125; finally &#123;
        try &#123;
            // 释放资源
            if (httpClient != null) &#123;
                httpClient.close();
            &#125;
            if (response != null) &#123;
                response.close();
            &#125;
        &#125; catch (IOException e) &#123;
            e.printStackTrace();
        &#125;
    &#125;
    return returnJson;
&#125;


/**
 * 发送post请求 - json
 * @param uri 发送请求的地址
 * @param object 请求体
 * @return json字符串
 */
public static String sendPost(String uri, Object object)&#123;
    //设置返回对象
    String returnJson = null;
    // 获得Http客户端(可以理解为:你得先有一个浏览器;注意:实际上HttpClient与浏览器是不一样的)
    CloseableHttpClient httpClient = HttpClientBuilder.create().build();
    // 创建Post请求
    HttpPost httpPost = new HttpPost(uri);

    //将Object转换为json字符串;
    String jsonString = JSON.toJSONString(object);
    StringEntity entity = new StringEntity(jsonString, &quot;UTF-8&quot;);

    // post请求是将参数放在请求体里面传过去的;这里将entity放入post请求体中
    httpPost.setEntity(entity);
    httpPost.setHeader(&quot;Content-Type&quot;, &quot;application/json;charset=utf8&quot;);

    // 响应模型
    CloseableHttpResponse response = null;
    try &#123;
        // 由客户端执行(发送)Post请求
        response = httpClient.execute(httpPost);
        // 从响应模型中获取响应实体
        HttpEntity responseEntity = response.getEntity();
        if (responseEntity != null) &#123;
            returnJson = EntityUtils.toString(responseEntity);
        &#125;
    &#125; catch (ClientProtocolException e) &#123;
        e.printStackTrace();
    &#125; catch (ParseException e) &#123;
        e.printStackTrace();
    &#125; catch (IOException e) &#123;
        e.printStackTrace();
    &#125; finally &#123;
        try &#123;
            // 释放资源
            if (httpClient != null) &#123;
                httpClient.close();
            &#125;
            if (response != null) &#123;
                response.close();
            &#125;
        &#125; catch (IOException e) &#123;
            e.printStackTrace();
        &#125;
    &#125;
    return returnJson;
&#125;</code></pre>
<p>}</p>
<p>```</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://meihao1104.com/2020/09/17/java%E4%BD%BF%E7%94%A8HttpClient%E5%8F%91%E9%80%81http%E8%AF%B7%E6%B1%82/" data-id="ckf6hmw0g000u2rsbd4un9ae7" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2020/09/17/java%20%E5%8F%91%E9%82%AE%E4%BB%B6%20javax.mail/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          (no title)
        
      </div>
    </a>
  
  
    <a href="/2020/09/17/java%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title"></div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Jrebel/" rel="tag">Jrebel</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/" rel="tag">java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/" rel="tag">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/" rel="tag">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/svn/" rel="tag">svn</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue/" rel="tag">vue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/windowns/" rel="tag">windowns</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%94%99%E8%AF%AF%E8%AE%B0%E5%BD%95/" rel="tag">错误记录</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/JavaScript/" style="font-size: 10px;">JavaScript</a> <a href="/tags/Jrebel/" style="font-size: 10px;">Jrebel</a> <a href="/tags/java/" style="font-size: 20px;">java</a> <a href="/tags/js/" style="font-size: 10px;">js</a> <a href="/tags/linux/" style="font-size: 10px;">linux</a> <a href="/tags/svn/" style="font-size: 15px;">svn</a> <a href="/tags/vue/" style="font-size: 10px;">vue</a> <a href="/tags/windowns/" style="font-size: 10px;">windowns</a> <a href="/tags/%E9%94%99%E8%AF%AF%E8%AE%B0%E5%BD%95/" style="font-size: 15px;">错误记录</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">九月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">七月 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/09/17/lombok%20plugin%E6%8F%92%E4%BB%B6%20%E6%B3%A8%E8%A7%A3vo%E7%B1%BB/">(no title)</a>
          </li>
        
          <li>
            <a href="/2020/09/17/java%E9%80%9A%E8%BF%87Sigar%E8%8E%B7%E5%8F%96%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%BF%A1%E6%81%AF/">(no title)</a>
          </li>
        
          <li>
            <a href="/2020/09/17/Centos7%E4%B8%8Bdocker%E4%BD%BF%E7%94%A8/">(no title)</a>
          </li>
        
          <li>
            <a href="/2020/09/17/JAVA%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81/">(no title)</a>
          </li>
        
          <li>
            <a href="/2020/09/17/JAVA%E9%85%8D%E5%90%88Redis%E5%AE%9E%E7%8E%B0%E5%89%8A%E5%B3%B0/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 VinhoJiang<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>